[phases.setup]
nixPkgs = ["nodejs", "npm", "python3", "pip", "curl"]

[phases.install]
cmds = [
  "cd server && npm install",
  "curl -L https://github.com/yt-dlp/yt-dlp/releases/latest/download/yt-dlp -o /usr/local/bin/yt-dlp && chmod a+rx /usr/local/bin/yt-dlp"
]

[phases.build]
cmds = ["cd server && npm run build"]

[start]
cmd = "cd server && npm start"
